<%= provide(:title, 'Post details' ) %>
<h1>Post details</h1>
<div class="py-4">
  <div class="container">
    <div class="row">
      <div class="col-sm-8">
        <div class="card-group">
          <div class="card">
            <div class="card-body">
              <div class="user card-body">
                <h5><%= @post.user.name %></h5>
              </div>
              <div class="content card-body">
                <%= @post.content %>
              </div>
              <div class="card-body">
                <%= image_tag @post.posts_articles_image if @post.articles_image.attached? %>
              </div>
              <div class="card-body">
                <div class="post-delete-link">
                  <% if current_user?(@post.user) %>
                  <%= link_to "削除", @post, method: :delete, class: "btn btn-secondary", data: { confirm: '本当に削除してもよろしいですか？'}%>
                  <% end %>
                </div>
              </div>
              <div class="card-body">
                <ul class="list-group list-group-horizontal post-attached">
                  <li class="list-group-item flex-fill">ほうゆう</li>
                  <li class="list-group-item flex-fill">コメント</li>
                  <li class="list-group-item flex-fill">
                    <%= time_ago_in_words(@post.created_at) %>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ここはコメント機能！！ -->
      <div class="col-sm-4">
        <div class="card-group">
          <div class="card-body post-new">
            <h5><%= @current_user.name %></h5>
            <%= render 'shared/stats' %>
            <br>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div>
  <h4>コメント</h4>
  <div id="comments_area">
    <!-- #① -->
    <!-- 投稿されたコメント一覧をブログの詳細ページに表示するためのrender -->
    <%= render partial: 'comments/index', locals: { comments: @comments } %>
  </div>
  <% if logged_in? %>
  <!-- コメント入力欄をブログの詳細ページに表示するためのrender -->
  <%= render partial: 'comments/form', locals: { comment: @comment, post: @post } %>
  <% end %>
</div>
