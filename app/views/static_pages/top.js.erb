<script type="text/javascript">
  let map;
  let marker = [];
  let infoWindow = [];
  let markerData = gon.favorite_list;
  function initMap() {
  geocoder = new google.maps.Geocoder()
  map = new google.maps.Map(document.getElementById('map'), {
  center: { lat: 35.964321, lng: 138.217152},
  zoom: 12,
  });
  for (var i = 0; i < markerData.length; i++) {
          let id = markerData[i]['id']
  
          markerLatLng = new google.maps.LatLng({
            lat: markerData[i]['latitude'],
            lng: markerData[i]['longitude']
          });
  
          marker[i] = new google.maps.Marker({
            position: markerLatLng,
            map: map
          });
  
          infoWindow[i] = new google.maps.InfoWindow({
            content: `<a data-turbolinks="false", href='/lend_farmlands/${ id }'>${ markerData[i]['address'] }</a>`
          });
  
          markerEvent(i);
        }
      }
  
      function markerEvent(i) {
        marker[i].addListener('click', function () {
          infoWindow[i].open(map, marker[i]);
        });
      }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap"></script>
<script>
  $(function() {
  $('.tab').click(function(){
  $('.tab-active').removeClass('tab-active');
  $(this).addClass('tab-active');
  $('.box-show').removeClass('box-show');
  const index = $(this).index();
  $('.tabbox').eq(index).addClass('box-show');
  });
  });
</script>
